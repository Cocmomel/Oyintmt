<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>21 Ochko Mini Ilova</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%; font-family: Arial, sans-serif; background: #f9f9f9;
    display: flex; flex-direction: column;
  }
  /* Loading sahifa */
  #loading {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: white; display: flex; justify-content: center; align-items: center;
    flex-direction: column; z-index: 10;
  }
  #loading img {
    width: 150px; margin-bottom: 20px;
  }
  #loading p {
    font-size: 18px; color: #555;
  }

  /* Asosiy kontent */
  #app {
    flex: 1; display: none; flex-direction: column;
  }
  /* Pastki menyu */
  #menu {
    height: 60px; background: #007bff; display: flex; justify-content: space-around; align-items: center;
    color: white; font-weight: bold; position: fixed; bottom: 0; width: 100%; box-shadow: 0 -2px 5px rgba(0,0,0,0.2);
  }
  #menu button {
    background: none; border: none; color: white; font-size: 14px; cursor: pointer;
    display: flex; flex-direction: column; align-items: center;
  }
  #menu button:hover {
    color: #ffd700;
  }
  #menu button.active {
    color: #ffd700;
  }

  /* Sahifa sarlavhalari */
  #content {
    padding: 20px; margin-bottom: 70px; /* pastki menyuga joy qoldirish uchun */
    overflow-y: auto; flex: 1;
  }
  h2 {
    margin-top: 0;
  }

  /* Hisobim bo‘limi */
  #balance {
    font-size: 24px; font-weight: bold; margin-bottom: 15px;
  }
  #history {
    max-height: 200px; overflow-y: auto; background: #fff; padding: 10px; border-radius: 5px; box-shadow: 0 0 5px #ccc;
  }
  #history table {
    width: 100%; border-collapse: collapse;
  }
  #history th, #history td {
    padding: 8px; border-bottom: 1px solid #ddd; text-align: left;
  }
  #withdraw-btn {
    margin-top: 15px; padding: 10px 20px; background: #28a745; border: none; color: white; border-radius: 5px;
    cursor: pointer; font-weight: bold;
  }
  #withdraw-btn:hover {
    background: #218838;
  }

  /* Referal ssilka */
  #ref-link {
    background: #e9ecef; padding: 10px; border-radius: 5px; user-select: all;
    margin-bottom: 10px; font-size: 14px; word-break: break-all;
  }
  #ref-count {
    font-weight: bold; margin-bottom: 15px;
  }

  /* Biz haqimizda */
  #about {
    font-size: 16px; line-height: 1.5;
  }
  #about a {
    color: #007bff; text-decoration: none;
  }
  #about a:hover {
    text-decoration: underline;
  }
  #contact-btn {
    margin-top: 15px; padding: 10px 20px; background: #007bff; border: none; color: white; border-radius: 5px;
    cursor: pointer; font-weight: bold;
  }
  #contact-btn:hover {
    background: #0056b3;
  }
</style>
</head>
<body>

<!-- Loading ekrani -->
<div id="loading">
  <img src="https://cdn-icons-png.flaticon.com/512/1828/1828665.png" alt="Loading" />
  <p>Yuklanmoqda...</p>
</div>

<!-- Asosiy ilova -->
<div id="app">

  <div id="content">
    <!-- Sahifa kontenti shu yerga chiqadi -->
  </div>

  <nav id="menu">
    <button id="btn-games" class="active">O'yinlar</button>
    <button id="btn-balance">Hisobim</button>
    <button id="btn-friends">Dostlarim</button>
    <button id="btn-about">Biz haqimizda</button>
  </nav>

</div>

<script>
  // Foydalanuvchi ma'lumotlari va balans uchun joy
  let userId = null;
  let balance = 0;
  let history = [];
  let refLink = "";
  let refCount = 0;

  // Sahifalarni yaratish funksiyalari

  function renderGames() {
    return `<h2>O'yinlar</h2>
            <p>Hali o'yinlar qo'shilmagan.</p>`;
  }

  function renderBalance() {
    let histHtml = `<table>
      <tr><th>Sana</th><th>Harakat</th><th>Summa</th></tr>`;
    history.forEach(item => {
      histHtml += `<tr>
        <td>${item.date}</td>
        <td>${item.action}</td>
        <td>${item.amount} so'm</td>
      </tr>`;
    });
    histHtml += `</table>`;

    return `<h2>Hisobim</h2>
            <div id="balance">Balans: ${balance} so'm</div>
            <div id="history">${histHtml}</div>
            <button id="withdraw-btn">Pul yechish</button>`;
  }

  function renderFriends() {
    return `<h2>Dostlarim</h2>
            <div>Referal ssilka:</div>
            <div id="ref-link">${refLink}</div>
            <div id="ref-count">Qo‘shilganlar soni: ${refCount}</div>`;
  }

  function renderAbout() {
    return `<h2>Biz haqimizda</h2>
            <p id="about">
              Telegram kanal va guruhimiz: <br/>
              <a href="https://t.me/TarjimakinolarTMT" target="_blank">TarjimakinolarTMT kanal</a><br/>
              <a href="https://t.me/YourGroupLink" target="_blank">Bizning guruh</a><br/><br/>
              Yordam kerak bo‘lsa, <button id="contact-btn">Adminga yozish</button>
            </p>`;
  }

  // Asosiy kontentni yangilash
  function updateContent(html) {
    document.getElementById('content').innerHTML = html;
    attachEventListeners();
  }

  // Buttonlarni boshqarish va faol buttonni belgilash
  function setActiveButton(buttonId) {
    document.querySelectorAll('#menu button').forEach(btn => btn.classList.remove('active'));
    document.getElementById(buttonId).classList.add('active');
  }

  // Event listenerlarni qo‘shish
  function attachEventListeners() {
    // Pul yechish tugmasi
    const withdrawBtn = document.getElementById('withdraw-btn');
    if (withdrawBtn) {
      withdrawBtn.addEventListener('click', () => {
        alert('Pul yechish funksiyasi hali ishlab chiqilmoqda.');
      });
    }
    // Adminga yozish tugmasi
    const contactBtn = document.getElementById('contact-btn');
    if (contactBtn) {
      contactBtn.addEventListener('click', () => {
        // Adminga Telegramda yozish uchun link
        window.open('https://t.me/Cocmomel', '_blank');
      });
    }
  }

  // Menu buttonlariga event qo‘yish
  document.getElementById('btn-games').onclick = () => {
    setActiveButton('btn-games');
    updateContent(renderGames());
  };
  document.getElementById('btn-balance').onclick = () => {
    setActiveButton('btn-balance');
    updateContent(renderBalance());
  };
  document.getElementById('btn-friends').onclick = () => {
    setActiveButton('btn-friends');
    updateContent(renderFriends());
  };
  document.getElementById('btn-about').onclick = () => {
    setActiveButton('btn-about');
    updateContent(renderAbout());
  };

  // Loading ekrani 2 soniyadan so‘ng o‘chadi va app ko‘rinadi
  window.onload = () => {
    setTimeout(() => {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('app').style.display = 'flex';
      updateContent(renderGames());

      // Foydalanuvchi ID sini URL dan olamiz (agar bor bo‘lsa)
      const params = new URLSearchParams(window.location.search);
      userId = params.get('user_id') || 'guest';
      
      // Balans, tarix va referal ma'lumotlarini olish uchun
      // Bu yerda API dan fetch qilish yoki test uchun statik qiymat
      balance = 50000; // misol uchun 50,000 so‘m
      history = [
        {date: '2025-08-09', action: 'Yutuq', amount: 2500},
        {date: '2025-08-08', action: 'Tikish', amount: -1000},
        {date: '2025-08-07', action: 'Yutuq', amount: 3500}
      ];
      refLink = `https://t.me/YourBot?start=${userId}`;
      refCount = 3; // misol uchun
    }, 2000);
  };
</script>

</body>
</html>
